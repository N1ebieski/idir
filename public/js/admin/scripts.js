function categorySelect(){return $("#categoryOptions .form-group").map(function(){return"#"+$(this).attr("id")}).get()}function fmSetLink(e){$("div.trumbowyg-modal-box").find("input[name=url]").val(e)}jQuery(document).ready(function(){$(document).trigger("readyAndAjax")}),jQuery(document).ajaxComplete(function(){$(document).trigger("readyAndAjax")}),jQuery(document).on("readyAndAjax",function(){$("form").find("input, select").keypress(function(e){if(13==e.which)return e.preventDefault(),!1})}),jQuery(window).on("readyAndAjax",function(){-1!=navigator.userAgent.indexOf("Firefox")&&$('[spellcheck="true"]:first').focusWithoutScrolling()}),jQuery(document).on("click",".storeBanModel, .store-banmodel",function(e){e.preventDefault();let t=$(this),a=t.closest("form");a.btn=a.find(".btn"),a.input=a.find(".form-control, .custom-control-input");let n={body:a.closest(".modal-body")};jQuery.ajax({url:a.attr("data-route"),method:"post",data:a.serialize(),dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),a.input.removeClass("is-valid"),a.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),a.input.addClass("is-valid")},success:function(e){n.body.html($.getAlert("success",e.success))},error:function(e){e.responseJSON.errors&&$.each(e.responseJSON.errors,function(e,t){a.find("#"+$.escapeSelector(e)).addClass("is-invalid"),a.find("#"+$.escapeSelector(e)).closest(".form-group").append($.getError(e,t))})}})}),jQuery(document).on("click",".destroyCategory, .destroy-category",function(e){e.preventDefault();let t=$(this),a=$("#row"+t.data("id"));jQuery.ajax({url:t.data("route"),method:"delete",beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-btn-ok-class*="destroyCategory"], [data-btn-ok-class*="destroy-category"]').getLoader("show")},complete:function(){a.find('[data-btn-ok-class*="destroyCategory"], [data-btn-ok-class*="destroy-category"]').getLoader("hide")},success:function(e){a.fadeOut("slow"),$.each(e.descendants,function(e,t){let a=$("#row"+t);a.length&&a.fadeOut("slow")})}})}),jQuery(document).on("click","#searchCategory .btn",function(e){e.preventDefault();let t=$("#searchCategory");t.url=t.attr("data-route"),t.btn=t.find(".btn"),t.input=t.find("input"),$.ajax({url:t.url+"?name="+t.input.val(),method:"get",dataType:"json",beforeSend:function(){t.btn.prop("disabled",!0),$("#searchCategoryOptions").empty(),t.append($.getLoader("spinner-border")),t.find(".invalid-feedback").remove(),t.input.removeClass("is-valid"),t.input.removeClass("is-invalid")},complete:function(){t.btn.prop("disabled",!1),t.find("div.loader-absolute").remove()},success:function(e){let a=$(e.view).find(categorySelect().join(",")).remove().end();t.find("#searchCategoryOptions").html($.sanitize(a.html()))},error:function(e){var a=e.responseJSON;$.each(a.errors,function(e,a){t.input.addClass("is-invalid"),t.input.parent().after($.getError(e,a))})}})}),jQuery(document).on("change",".categoryOption",function(){let e=$("#searchCategory");e.max=e.attr("data-max");let t=$(this).closest(".form-group");1==$(this).prop("checked")?t.appendTo("#categoryOptions"):t.remove(),$.isNumeric(e.max)&&(e.is(":visible")&&categorySelect().length>=e.max&&e.fadeOut(),!e.is(":visible")&&categorySelect().length<e.max&&e.fadeIn())}),jQuery(document).on("readyAndAjax",function(){$("#searchCategory input").keypress(function(e){if(13==e.which)return $("#searchCategory .btn").trigger("click"),!1})}),jQuery(document).on("click",".statusCategory, .status-category",function(e){e.preventDefault();let t=$(this),a=t.closest("[id^=row]");a.btnGroup=a.find(".responsive-btn-group"),a.btn0=a.find('button[data-status="0"]'),a.btn1=a.find('button[data-status="1"]'),jQuery.ajax({url:t.data("route"),method:"patch",data:{status:t.data("status")},beforeSend:function(){a.btnGroup.addClass("disabled"),t.getLoader("show")},success:function(e){t.getLoader("hide"),1==e.status&&(a.btnGroup.removeClass("disabled"),a.btn1.prop("disabled",!0),a.btn0.attr("disabled",!1),a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3),$.each(e.ancestors,function(e,t){let a=$("#row"+t);a.length&&(a.find('button[data-status="1"]').prop("disabled",!0),a.find('button[data-status="0"]').attr("disabled",!1),a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))})),0==e.status&&(a.btnGroup.removeClass("disabled"),a.btn0.prop("disabled",!0),a.btn1.attr("disabled",!1),a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3),$.each(e.descendants,function(e,t){let a=$("#row"+t);a.length&&(a.find('button[data-status="0"]').prop("disabled",!0),a.find('button[data-status="1"]').attr("disabled",!1),a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))}))}})}),jQuery(document).on("click",".destroyComment, .destroy-comment",function(e){e.preventDefault();let t=$(this),a=$("#row"+t.data("id"));jQuery.ajax({url:t.data("route"),method:"delete",beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-btn-ok-class*="destroyComment"], [data-btn-ok-class*="destroy-comment"]').getLoader("show")},complete:function(){a.find('[data-btn-ok-class*="destroyComment"], [data-btn-ok-class*="destroy-comment"]').getLoader("hide")},success:function(e){a.fadeOut("slow"),$.each(e.descendants,function(e,t){let a=$("#row"+t);a.length&&a.fadeOut("slow")})}})}),jQuery(document).on("click",".storeComment, .store-comment",function(e){e.preventDefault();let t=$(this),a=t.closest("form");a.btn=a.find(".btn"),a.input=a.find(".form-control"),jQuery.ajax({url:a.data("route"),method:"post",data:a.serialize(),dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),a.input.removeClass("is-valid"),a.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),a.input.addClass("is-valid")},success:function(e){let t=$("#row"+a.data("id"));t.after($.sanitize(e.view));let n=t.next();n.addClass("alert-primary font-italic"),setTimeout(function(){n.removeClassStartingWith("alert-")},5e3),$(".modal").modal("hide")},error:function(e){$.each(e.responseJSON.errors,function(e,t){a.find("#"+$.escapeSelector(e)).addClass("is-invalid"),a.find("#"+$.escapeSelector(e)).after($.getError(e,t))})}})}),jQuery(document).on("click",".censoreComment, .censore-comment",function(e){e.preventDefault();let t=$(this),a=t.closest("[id^=row]");jQuery.ajax({url:t.data("route"),method:"patch",data:{censored:t.data("censored")},beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),t.getLoader("show")},success:function(e){t.getLoader("hide"),a.html($.sanitize($(e.view).html())),1==e.censored&&(a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3)),0==e.censored&&(a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))}})}),jQuery(document).on("click",".statusComment, .status-comment",function(e){e.preventDefault();let t=$(this),a=t.closest("[id^=row]");a.btnGroup=a.find(".responsive-btn-group"),a.btn0=a.find('button[data-status="0"]'),a.btn1=a.find('button[data-status="1"]'),jQuery.ajax({url:t.data("route"),method:"patch",data:{status:t.data("status")},beforeSend:function(){a.btnGroup.addClass("disabled"),t.getLoader("show")},success:function(e){t.getLoader("hide"),1==e.status&&(a.btnGroup.removeClass("disabled"),a.btn1.prop("disabled",!0),a.btn0.prop("disabled",!1),a.find("button.answer").prop("disabled",!1),a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3),$.each(e.ancestors,function(e,t){let a=$("#row"+t);a.length&&(a.find('button[data-status="1"]').prop("disabled",!0),a.find('button[data-status="0"]').prop("disabled",!1),a.find("button.answer").prop("disabled",!1),a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))})),0==e.status&&(a.btnGroup.removeClass("disabled"),a.btn0.prop("disabled",!0),a.btn1.prop("disabled",!1),a.find("button.answer").prop("disabled",!0),a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3),$.each(e.descendants,function(e,t){let a=$("#row"+t);a.length&&(a.find('button[data-status="0"]').prop("disabled",!0),a.find('button[data-status="1"]').prop("disabled",!1),a.find("button.answer").prop("disabled",!0),a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))}))}})}),jQuery(document).on("click",".create",function(e){e.preventDefault();let t=$(this),a={body:$(t.data("target")).find(".modal-body"),content:$(t.data("target")).find(".modal-content")};a.body.empty(),jQuery.ajax({url:t.data("route"),method:"get",beforeSend:function(){a.body.append($.getLoader("spinner-grow"))},complete:function(){a.body.find(".loader-absolute").remove()},success:function(e){a.body.html($.sanitize(e.view))},error:function(e){e.responseJSON.message&&a.body.prepend($.getAlert("danger",e.responseJSON.message))}})}),jQuery(document).on("click",".destroy",function(e){e.preventDefault();let t=$(this),a=$("#row"+t.data("id"));jQuery.ajax({url:t.data("route"),method:"delete",beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-btn-ok-class*="destroy"]').getLoader("show")},complete:function(){a.find('[data-btn-ok-class*="destroy"]').getLoader("hide")},success:function(e){a.fadeOut("slow")}})}),jQuery(document).on("click",".edit",function(e){e.preventDefault();let t=$(this),a={body:$(t.data("target")).find(".modal-body"),content:$(t.data("target")).find(".modal-content")};a.body.empty(),jQuery.ajax({url:t.data("route"),method:"get",beforeSend:function(){a.body.append($.getLoader("spinner-grow"))},complete:function(){a.body.find(".loader-absolute").remove()},success:function(e){a.body.html($.sanitize(e.view))}})}),function(e){function t(t,a){e.ajax({url:a,method:"get",dataType:"html",beforeSend:function(){e("#filterContent, #filter-content").find(".btn").prop("disabled",!0),e("#filterOrderBy, #filter-orderby").prop("disabled",!0),e("#filterPaginate, #filter-paginate").prop("disabled",!0),t.children("div").append(e.getLoader("spinner-border")),e("#filterModal, #filter-modal").modal("hide")},complete:function(){t.find(".loader-absolute").remove()},success:function(t){e("#filterContent, #filter-content").html(e.sanitize(e(t).find("#filterContent, #filter-content").html())),document.title=document.title.replace(/:\s(\d+)/,": 1"),history.replaceState(null,null,a)}})}jQuery(document).on("change","#filterOrderBy, #filter-orderby",function(a){a.preventDefault();let n=e("#filter");n.href=n.data("route")+"?"+n.serialize(),t(n,n.href)}),jQuery(document).on("click","#filterFilter, #filter-filter",function(a){a.preventDefault();let n=e("#filter");n.href=n.data("route")+"?"+n.serialize(),e("#filter").valid()&&t(n,n.href)}),jQuery(document).on("click","a.filterOption, a.filter-option",function(a){a.preventDefault();let n=e("#filter");n.href=n.data("route")+"?"+n.find('[name!="'+e.escapeSelector(e(this).data("name"))+'"]').serialize(),t(n,n.href)}),jQuery(document).on("change","#filterPaginate, #filter-paginate",function(a){a.preventDefault();let n=e("#filter");n.href=n.data("route")+"?"+n.serialize(),t(n,n.href)})}(jQuery),jQuery(document).on("click","a.show, button.show",function(e){e.preventDefault();let t=$(this),a={body:$(t.data("target")).find(".modal-body"),content:$(t.data("target")).find(".modal-content")};a.body.empty(),jQuery.ajax({url:t.data("route"),method:"get",beforeSend:function(){a.body.append($.getLoader("spinner-grow"))},complete:function(){a.body.find(".loader-absolute").remove()},success:function(e){a.body.html($.sanitize(e.view))}})}),jQuery(document).on("click",".store",function(e){e.preventDefault();let t=$(this),a=t.closest("form");a.btn=a.find(".btn"),a.input=a.find(".form-control"),jQuery.ajax({url:a.data("route"),method:"post",data:new FormData(a[0]),processData:!1,contentType:!1,dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),a.input.removeClass("is-valid"),a.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),a.input.addClass("is-valid")},success:function(e){$(".modal").modal("hide"),window.location.reload()},error:function(e){if(e.responseJSON.errors){let t=0;$.each(e.responseJSON.errors,function(e,n){a.find("#"+$.escapeSelector(e)).length||(e=e.match(/([a-z_\-\.]+)(?:\.([\d]+)|)$/)[1]),a.find("#"+$.escapeSelector(e)).addClass("is-invalid"),a.find("#"+$.escapeSelector(e)).closest(".form-group").append($.getError(e,n)),0===t&&$("#"+$.escapeSelector(e)).length&&$(".modal").animate({scrollTop:$("#"+$.escapeSelector(e)).position().top+50},1e3),t++})}else e.responseJSON.message&&a.prepend($.getAlert("danger",e.responseJSON.message))}})}),jQuery(document).on("click",".status",function(e){e.preventDefault();let t=$(this),a=t.closest("[id^=row]");jQuery.ajax({url:t.data("route"),method:"patch",data:{status:t.data("status")},beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),t.getLoader("show")},success:function(e){t.getLoader("hide"),a.html($.sanitize($(e.view).html())),1==e.status&&(a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3)),0==e.status&&(a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))}})}),jQuery(document).on("click",".update",function(e){e.preventDefault();let t=$(this),a=t.closest("form");a.btn=a.find(".btn"),a.input=a.find(".form-control");let n=new FormData(a[0]);n.append("_method","put"),jQuery.ajax({url:a.data("route"),method:"post",data:n,processData:!1,contentType:!1,dataType:"json",beforeSend:function(){t.getLoader("show"),a.find(".invalid-feedback").remove(),a.input.removeClass("is-valid"),a.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),a.input.addClass("is-valid")},success:function(e){let t=$("#row"+a.attr("data-id"));t.html($.sanitize($(e.view).html())),t.addClass("alert-primary"),setTimeout(function(){t.removeClassStartingWith("alert-")},5e3),$(".modal").modal("hide")},error:function(e){if(e.responseJSON.errors){let t=0;$.each(e.responseJSON.errors,function(e,n){a.find("#"+$.escapeSelector(e)).length||(e=e.match(/([a-z_\-\.]+)(?:\.([\d]+)|)$/)[1]),a.find("#"+$.escapeSelector(e)).addClass("is-invalid"),a.find("#"+$.escapeSelector(e)).closest(".form-group").append($.getError(e,n)),0===t&&$("#"+$.escapeSelector(e)).length&&$(".modal").animate({scrollTop:$("#"+$.escapeSelector(e)).position().top+50},1e3),t++})}else e.responseJSON.message&&a.prepend($.getAlert("danger",e.responseJSON.message))}})}),jQuery(document).on("click","a.resetMailing, a.reset-mailing",function(e){e.preventDefault();var t=$(this),a=$("#row"+t.data("id"));$.ajax({url:t.data("route"),method:"delete",beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-btn-ok-class*="resetMailing"], [data-btn-ok-class*="reset-mailing"]').getLoader("show")},complete:function(){a.find('[data-btn-ok-class*="resetMailing"], [data-btn-ok-class*="reset-mailing"]').getLoader("hide")},success:function(e){a.html($.sanitize($(e.view).html())),a.addClass("alert-danger"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3)}})}),jQuery(document).on("click",".destroyPage, .destroy-page",function(e){e.preventDefault();let t=$(this),a=$("#row"+t.data("id"));jQuery.ajax({url:t.data("route"),method:"delete",beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-btn-ok-class*="destroyPage"], [data-btn-ok-class*="destroy-page"]').getLoader("show")},complete:function(){a.find('[data-btn-ok-class*="destroyPage"], [data-btn-ok-class*="destroy-page"]').getLoader("hide")},success:function(e){a.fadeOut("slow"),$.each(e.descendants,function(e,t){let a=$("#row"+t);a.length&&a.fadeOut("slow")})}})}),jQuery(document).on("click",".updatePositionPage, .update-position-page",function(e){e.preventDefault();let t=$(this),a=t.closest("form");$.ajax({url:a.data("route"),method:"patch",data:{position:a.find("#position").val()},beforeSend:function(){t.getLoader("show")},complete:function(){t.getLoader("hide")},success:function(e){$(".modal").modal("hide"),$.each(e.siblings,function(e,t){let a=$("#row"+e);a.length&&(a.find("#position").text(t+1),a.addClass("alert-primary"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))})}})}),jQuery(document).on("click",".statusPage, .status-page",function(e){e.preventDefault();let t=$(this),a=t.closest("[id^=row]");a.btnGroup=a.find(".responsive-btn-group"),a.btn0=a.find('button[data-status="0"]'),a.btn1=a.find('button[data-status="1"]'),jQuery.ajax({url:t.data("route"),method:"patch",data:{status:t.data("status")},beforeSend:function(){a.btnGroup.addClass("disabled"),t.getLoader("show")},success:function(e){t.getLoader("hide"),1==e.status&&(a.btnGroup.removeClass("disabled"),a.btn1.prop("disabled",!0),a.btn0.prop("disabled",!1),a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3),$.each(e.ancestors,function(e,t){let a=$("#row"+t);a.length&&(a.find('button[data-status="1"]').prop("disabled",!0),a.find('button[data-status="0"]').prop("disabled",!1),a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))})),0==e.status&&(a.btnGroup.removeClass("disabled"),a.btn0.prop("disabled",!0),a.btn1.prop("disabled",!1),a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3),$.each(e.descendants,function(e,t){let a=$("#row"+t);a.length&&(a.find('button[data-status="0"]').prop("disabled",!0),a.find('button[data-status="1"]').prop("disabled",!1),a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))}))}})}),jQuery(document).on("click",".clearReport, .clear-report",function(e){e.preventDefault();let t=$(this);$.ajax({url:t.data("route"),method:"delete",beforeSend:function(){t.getLoader("show")},complete:function(){t.getLoader("hide")},success:function(e){let a=$("#row"+t.attr("data-id"));a.html($.sanitize($(e.view).html())),a.addClass("alert-primary"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3),$(".modal").modal("hide")}})}),function(e){e.fn.autoHeight=function(t){function a(t){return t.offsetHeight<t.scrollHeight?e(t).css({height:"auto"}).height(t.scrollHeight):e(t)}if(!1!==("boolean"!=typeof t.autogrow||t.autogrow))return this.each(function(){a(this).on("input",function(){a(this)})})},e.fn.removeClassStartingWith=function(e){this.removeClass(function(t,a){return(a.match(new RegExp("\\b"+e+"\\S+","g"))||[]).join(" ")})},e.fn.focusWithoutScrolling=function(){var e=window.scrollX,t=window.scrollY;this.focus(),window.scrollTo(e,t)},e.sanitize=function(t){let a=e(e.parseHTML("<div>"+t+"</div>",null,!1));return a.find("*").each(function(t,a){e.each(a.attributes,function(){let t=this.name,n=this.value;0!=t.indexOf("on")&&0!=n.indexOf("javascript:")||e(a).removeAttr(t)})}),a.html()},e.getUrlParameter=function(e,t){return(RegExp(t+"=(.+?)(&|$)").exec(e)||[,null])[1]},e.fn.getLoader=function(t,a="spinner-border"){if("show"==t){e(this).parent().find("button").prop("disabled",!0),e(this).find("i").hide();let t=!e(this).is('[class*="btn-outline-"]')||void 0!==e.cookie("themeToggle")&&"light"!==e.cookie("themeToggle")?"text-light":"text-dark";e(this).prepend(e.sanitize('<span class="'+a+" "+a+"-sm "+t+'" role="status" aria-hidden="true"></span>'))}"hide"==t&&(e(this).parent().find("button").prop("disabled",!1),e(this).find("i").show(),e(this).find('[role="status"]').remove())},e.getLoader=function(t="spinner-border",a="loader-absolute"){return e.sanitize('<div class="'+a+'"><div class="'+t+'"><span class="sr-only">Loading...</span></div></div>')},e.getAlert=function(t,a){return e.sanitize('<div class="alert alert-'+t+' alert-time" role="alert">'+a+"</div>")},e.getError=function(t,a){return e.sanitize('<span class="invalid-feedback d-block font-weight-bold" id="error-'+t+'">'+a+"</span>")}}(jQuery),jQuery(document).on("readyAndAjax",function(){$("[data-toggle=confirmation]").each(function(){let e=$(this);e.confirmation({rootSelector:"[data-toggle=confirmation]",copyAttributes:"href data-route data-id",singleton:!0,popout:!0,onConfirm:function(){e.hasClass("submit")&&e.parents("form:first").submit()}})})}),jQuery(document).on("readyAndAjax",function(){$(".select-picker-category").each(function(){let e=$(this);!0!==e.data("loaded")&&(e.selectpicker().on("changed.bs.select",function(){e.next("button").find(".filter-option-inner-inner > small").remove()}).on("shown.bs.select",function(){e.parent().find(".dropdown-menu").find('input[type="search"]').attr("name","search")}).trigger("change"),!0===e.data("abs")&&(e.ajaxSelectPicker({ajax:{data:function(){return{filter:{search:"{{{q}}}",orderby:"real_depth|desc",except:e.data("abs-filter-except")||null,status:1}}}},preprocessData:function(t){let a=[],n=e.data("abs-max-options-length")||t.data.length,o=e.data("abs-default-options")||[];return $.each(o,function(e,t){a.push({value:t.value,text:t.text})}),$.each(t.data,function(t,o){if(t>=n)return!1;a.push({value:e.data("abs-value-attr")?o[e.data("abs-value-attr")]:o.id,text:e.data("abs-text-attr")?o[e.data("abs-text-attr")]:o.name,data:{content:o.ancestors.length?'<small class="p-0 m-0">'+o.ancestors.map(e=>e.name).join(" &raquo; ")+" &raquo; </small>"+o.name:null}})}),a},minLength:3,preserveSelected:"boolean"!=typeof e.data("abs-preserve-selected")||e.data("abs-preserve-selected"),preserveSelectedPosition:e.data("abs-preserve-selected-position")||"before",langCode:e.data("abs-lang-code")||null}),e.trigger("change").data("AjaxBootstrapSelect").list.cache={}),e.parent().addClass("input-group"),e.attr("data-loaded",!0))})}),jQuery(document).on("readyAndAjax",function(){$(".select-picker").each(function(){let e=$(this);!0!==e.data("loaded")&&(e.selectpicker().on("changed.bs.select",function(){e.next("button").find(".filter-option-inner-inner > small").remove()}).on("shown.bs.select",function(){e.parent().find(".dropdown-menu").find('input[type="search"]').attr("name","search")}).trigger("change"),!0===e.data("abs")&&(e.ajaxSelectPicker({ajax:{data:function(){return{filter:{search:"{{{q}}}",except:e.data("abs-filter-except")||null,status:1}}}},preprocessData:function(t){let a=[],n=e.data("abs-max-options-length")||t.data.length,o=e.data("abs-default-options")||[];return $.each(o,function(e,t){a.push({value:t.value,text:t.text})}),$.each(t.data,function(t,o){if(t>=n)return!1;a.push({value:e.data("abs-value-attr")?o[e.data("abs-value-attr")]:o.id,text:e.data("abs-text-attr")?o[e.data("abs-text-attr")]:o.name})}),a},minLength:3,preserveSelected:"boolean"!=typeof e.data("abs-preserve-selected")||e.data("abs-preserve-selected"),preserveSelectedPosition:e.data("abs-preserve-selected-position")||"before",langCode:e.data("abs-lang-code")||null}),e.trigger("change").data("AjaxBootstrapSelect").list.cache={}),e.parent().addClass("input-group"),e.attr("data-loaded",!0))})}),jQuery(document).on("readyAndAjax",function(){let e=$("#infinite-scroll");e.jscroll({debug:!1,autoTrigger:1==e.data("autotrigger"),data:function(){let e=$(this).find("[id^=row]").map(function(){return $(this).attr("data-id")}).get();if(e.length)return{filter:{except:e}}},loadingHtml:$.getLoader("spinner-border","loader"),loadingFunction:function(){$("#is-pagination").first().remove()},padding:0,nextSelector:"a#is-next:last",contentSelector:"#infinite-scroll",pagingSelector:".pagination",callback:function(e){let t=e.split(" ")[0];history.replaceState(null,null,t)}})}),jQuery(document).on("readyAndAjax",function(){$(".lazy").lazy({effect:"fadeIn",effectTime:"fast",threshold:0})}),jQuery(document).ready(function(){"pl"===$(".datepicker, .timepicker").data("lang")&&($.extend($.fn.pickadate.defaults,{monthsFull:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],monthsShort:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"],weekdaysFull:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],weekdaysShort:["niedz.","pn.","wt.","śr.","cz.","pt.","sob."],today:"Dzisiaj",clear:"Usuń",close:"Zamknij",firstDay:1,format:"d mmmm yyyy",formatSubmit:"yyyy/mm/dd"}),$.extend($.fn.pickatime.defaults,{clear:"usunąć"})),$("form#createPost .datepicker, form#editFullPost .datepicker, form#create-post .datepicker, form#editfull-post .datepicker").pickadate({clear:"",formatSubmit:"yyyy-m-dd",hiddenName:!0}),$("form#createMailing .datepicker, form#editMailing .datepicker, form#create-mailing .datepicker, form#edit-mailing .datepicker").pickadate({clear:"",formatSubmit:"yyyy-m-dd",hiddenName:!0,min:new Date}),$(".timepicker").pickatime({clear:"",format:"H:i",formatSubmit:"HH:i",hiddenName:!0})}),jQuery(document).on("readyAndAjax",function(){$(".tagsinput").each(function(){let e=$(this);e.parent().find('[id$="_tagsinput"]').length||e.tagsInput({placeholder:e.attr("placeholder"),minChars:3,maxChars:e.data("max-chars")||30,limit:e.data("max"),validationPattern:new RegExp("^(?:^[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ0-9à-ü ]+$)$"),unique:!0})})}),jQuery(document).on("readyAndAjax",function(){if(!$(".trumbowyg-box").length){let e=$("#content_html_trumbowyg");e.trumbowyg({lang:e.data("lang"),svgPath:!1,hideButtonTexts:!0,tagsToRemove:["script"],autogrow:!0,btnsDef:{more:{fn:function(){e.trumbowyg("execCmd",{cmd:"insertHtml",param:"<p>[more]</p>",forceCss:!1})},title:'Button "show more"',ico:"more"}},btns:[["viewHTML"],["historyUndo","historyRedo"],["formatting"],["foreColor","backColor"],["strong","em","del"],["superscript","subscript"],["link"],["insertImage"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["more"],["fullscreen"]]}),e.on("tbwmodalopen",function(){let e=$("div.trumbowyg-modal-box");e.input=e.find("input[name=url]"),e.input.length&&e.find("input[name=alt]").length&&(e.input.css({position:"initial",width:"50px",flex:"auto",order:"1"}),e.input.wrap('<div style="position:absolute;top:0;right:0;width:70%;max-width:330px;"><div class="input-group" style="display:flex;">'),e.input.after('<div class="input-group-append" style="order:2;"><button class="btn btn-primary px-2 py-0" type="button" id="filemanager" style="height:27px;"><i class="far fa-image"></i></button></div>'))}),e.on("tbwopenfullscreen",function(){$(".trumbowyg-fullscreen .trumbowyg-editor").css({cssText:`height: calc(100% - ${$(".trumbowyg-button-pane").height()}px) !important`})}),$(document).on("click","button#filemanager",function(e){e.preventDefault(),window.open("/admin/file-manager/fm-button","fm","resizable=yes,status=no,scrollbars=yes,toolbar=no,menubar=no,width=1366,height=768")})}}),jQuery(document).on("readyAndAjax",function(){$(".alert-time").delay(2e4).fadeOut()}),jQuery(document).on("readyAndAjax",function(){$('[data-toggle="tooltip"]').tooltip()}),jQuery(document).ready(function(){$('[aria-controls="collapse-published-at"]').change(function(){0==$(this).val()?$("#collapse-published-at").collapse("hide"):$("#collapse-published-at").collapse("show")}),$('[aria-controls="collapse-activation-at"]').change(function(){2==$(this).val()?$("#collapse-activation-at").collapse("show"):$("#collapse-activation-at").collapse("hide")})}),jQuery(document).on("readyAndAjax",function(){$(".counter").each(function(){let e=$(this);e.name=$.escapeSelector(e.data("name")),e.min=void 0!==e.data("min")&&Number.isInteger(e.data("min"))?e.data("min"):null,e.max=void 0!==e.data("max")&&Number.isInteger(e.data("max"))?e.data("max"):null;let t=function(){let t=[$('[name="'+e.name+'"]'),$('[name="'+e.name+'"]').hasClass("trumbowyg-textarea")?$('[name="'+e.name+'"]').parent().find(".trumbowyg-editor"):null];$.each(t.filter(e=>null!=e),function(){$(this).keyup(function(){let t=$(this).attr("contenteditable")?parseFloat($(this).text().length):parseFloat($($.parseHTML($(this).val())).text().length);e.firstchild=e.children(":first"),e.firstchild.text(t),0===t?e.firstchild.removeClass():(e.firstchild.addClass("text-success"),e.firstchild.removeClass("text-danger"),(null!==e.min&&t<e.min||null!==e.max&&t>e.max)&&(e.firstchild.addClass("text-danger"),e.firstchild.removeClass("text-success")))})})};-1!==$('[name="'+e.name+'"]').attr("id").indexOf("trumbowyg")?$("#"+$('[name="'+e.name+'"]').attr("id")).on("tbwinit",()=>t()):t()})}),jQuery(document).on("readyAndAjax",function(){$(".custom-file-input").each(function(){$(this).on("change",function(){let e=$(this).val().split("\\").pop();$(this).siblings(".custom-file-label").addClass("selected").html(e)})})}),jQuery(document).on("change","form input[id^=delete_img]",function(){let e=$(this).closest(".form-group").find('[type="file"]'),t=$(this).closest(".form-group").find('[type="hidden"]');!0===$(this).prop("checked")?(e.prop("disabled",!1),t.prop("disabled",!0)):(e.prop("disabled",!0),t.prop("disabled",!1))}),jQuery(document).on("click","#selectAll, #select-all",function(){$("#selectForm .select, #select-form .select").prop("checked",$(this).prop("checked")).trigger("change")}),jQuery(document).on("change","#selectForm .select, #select-form .select",function(){$("#selectForm .select:checked, #select-form .select:checked").length>0?$(".select-action").fadeIn():$(".select-action").fadeOut()}),function(e){let t=e(window).scrollTop(),a=0,n=e(".navbar");!1!==n.data("autohide")&&e(window).scroll(function(){if(!e("body").hasClass("modal-open")){var o=e(window).scrollTop(),i=n.height()+10;t<(a=o)&&t>i?n.fadeOut():n.fadeIn(),t=a}})}(jQuery),$(document).on("scroll",function(){$(this).scrollTop()>100?$(".scroll-to-top").fadeIn():$(".scroll-to-top").fadeOut()}),$(document).on("click","a.scroll-to-top",function(e){$("html, body").stop().animate({scrollTop:0},1e3,"easeInOutExpo"),e.preventDefault()}),$(document).on("click",".modal-backdrop, #sidebarToggle",function(e){e.preventDefault(),window.innerWidth>=768?($(".sidebar").toggleClass("toggled"),$("ul.sidebar").hasClass("toggled")?$.cookie("sidebarToggle",1,{path:"/admin"}):$.cookie("sidebarToggle",0,{path:"/admin"})):($(".sidebar").removeClass("toggled"),$(".modal-backdrop").length?($(".modal-backdrop").fadeOut("slow",function(){$(this).remove()}),$(".sidebar").removeClass("show"),$("body").removeClass("modal-open")):($('<div class="modal-backdrop show z-900"></div>').appendTo("body").hide().fadeIn(),$(".sidebar").addClass("show"),$("body").addClass("modal-open")))}),jQuery(document).on("readyAndAjax",function(){$("textarea").each(function(){$(this).autoHeight({autogrow:$(this).data("autogrow")})})}),jQuery(document).on("click","div#themeToggle button, div#theme-toggle button",function(e){e.preventDefault();let t=$(this);t.hasClass("btn-light")&&$.cookie("themeToggle","light",{path:"/",expires:365}),t.hasClass("btn-dark")&&$.cookie("themeToggle","dark",{path:"/",expires:365}),window.location.reload()}),jQuery(document).on("click",".delayDir, .delay-dir",function(e){e.preventDefault();let t=$(this),a=$("#row"+t.data("id"));jQuery.ajax({url:t.data("route"),method:"patch",data:{delay:t.closest(".popover-body").find("#delay").val()},beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-btn-ok-class*="delayDir"], [data-btn-ok-class*="delay-dir"]').getLoader("show")},complete:function(){a.find(".responsive-btn-group").removeClass("disabled"),a.find('[data-btn-ok-class*="delayDir"], [data-btn-ok-class*="delay-dir"]').getLoader("hide")},success:function(e){a.html($.sanitize($(e.view).html())),a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3)}})}),jQuery(document).on("click","a.destroyDir, a.destroy-dir",function(e){e.preventDefault();let t=$(this),a=$("#row"+t.data("id"));jQuery.ajax({url:t.data("route"),data:{reason:t.closest(".popover-body").find("#reason").val()},method:"delete",beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-btn-ok-class*="destroyDir"], [data-btn-ok-class*="destroy-dir"]').getLoader("show")},complete:function(){a.find('[data-btn-ok-class*="destroyDir"], [data-btn-ok-class*="destroy-dir"]').getLoader("hide")},success:function(){a.fadeOut("slow")}})}),jQuery(document).on("click",".statusDir, .status-dir",function(e){e.preventDefault();let t=$(this),a=$("#row"+t.data("id"));jQuery.ajax({url:t.data("route"),method:"patch",data:{status:t.data("status"),reason:t.closest(".popover-body").find("#reason").val()},beforeSend:function(){a.find(".responsive-btn-group").addClass("disabled"),a.find('[data-status="'+t.data("status")+'"]').getLoader("show")},success:function(e){a.find('[data-status="'+t.data("status")+'"]').getLoader("hide"),a.html($.sanitize($(e.view).html())),1==e.status&&(a.addClass("alert-success"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3)),$.inArray(e.status,[0,5])>-1&&(a.addClass("alert-warning"),setTimeout(function(){a.removeClassStartingWith("alert-")},5e3))}})}),jQuery(document).on("click","#searchGus .btn, #search-gus .btn",function(e){e.preventDefault();let t=$("#searchGus, #search-gus");t.form=t.closest("form"),t.url=t.data("route"),t.btn=t.find(".btn"),t.input=t.find("input"),$.ajax({url:t.url,data:{type:t.find("select#type").val(),number:t.find("input#number").val()},method:"post",dataType:"json",beforeSend:function(){t.btn.getLoader("show"),t.find(".invalid-feedback").remove(),t.input.removeClass("is-valid"),t.input.removeClass("is-invalid")},complete:function(){t.btn.getLoader("hide")},success:function(e){$.each(e.data,function(e,a){let n=t.form.find("#"+$.escapeSelector(e));void 0!==n&&(n.val($.sanitize(a)),n.children("#map-select").length&&($("#remove-marker").trigger("click"),$("#add-marker").trigger("click",[null,$.sanitize(a)])))})},error:function(e){var a=e.responseJSON;$.each(a.errors,function(e,a){t.input.addClass("is-invalid"),t.input.parent().after($.getError(e,a))})}})}),jQuery(document).on("readyAndAjax",function(){$("#searchGus input, #search-gus input").keypress(function(e){if(13==e.which)return $("#searchGus .btn, #search-gus .btn").trigger("click"),!1})}),jQuery(document).on("click","a.reloadThumbnail, a.reload-thumbnail",function(e){e.preventDefault();let t=$(this);t.thumbnail=t.parent().children(".thumbnail"),t.thumbnail.img=t.thumbnail.children("img"),jQuery.ajax({url:t.data("route"),method:"patch",beforeSend:function(){t.prop("disabled",!0),t.thumbnail.append($.getLoader("spinner-border"))},complete:function(){t.prop("disabled",!1),t.thumbnail.find(".loader-absolute").remove()},success:function(e){t.thumbnail.img.attr("src",e.thumbnail_url+"&reload="+Math.random())}})}),jQuery(document).on("readyAndAjax",function(){$('[data-toggle^="dir-confirmation"]').each(function(){let e=$(this);e.confirmation({rootSelector:'[data-toggle^="dir-confirmation"]',copyAttributes:"href data-route data-status data-id data-delays data-delays-label data-delays-custom data-reasons data-reasons-label data-reasons-custom",singleton:!0,popout:!1,onConfirm:function(){e.hasClass("submit")&&e.parents("form:first").submit()}})})}),jQuery(document).on("readyAndAjax",function(){$("[data-toggle=dir-confirmation-delay]").on("inserted.bs.confirmation",function(){let e=$('[id^="confirmation"] .popover-body').last();e.p=e.find("p.confirmation-content"),e.btn=e.find("a.btn.btn-primary");let t=$($.parseHTML('<div><div class="form-group"><label for="delay">'+e.btn.data("delays-label")+':</label><select id="delay" class="form-control custom-select"></select></div></div>'));t.delay=t.find("select#delay"),$.each(e.btn.data("delays"),function(e,a){t.delay.append('<option value="'+a+'">'+a+"</option>")}),t.delay.append('<option value="custom">'+e.btn.data("delays-custom")+"...</option>"),e.p.html($.sanitize(t.html())).show()})}),$(document).on("change",'[id^="confirmation"] .popover-body select#delay',function(){"custom"===$(this).val()&&$(this).replaceWith('<input type="text" id="delay" class="form-control">')}),jQuery(document).on("readyAndAjax",function(){$("[data-toggle=dir-confirmation-reason]").on("inserted.bs.confirmation",function(){let e=$('[id^="confirmation"] .popover-body').last();e.p=e.find("p.confirmation-content"),e.btn=e.find("a.btn.btn-primary");let t=$($.parseHTML('<div><div class="form-group"><select id="reason" class="form-control custom-select"><option value="">'+e.btn.data("reasons-label")+":</option></select></div></div>"));t.reason=t.find("select#reason"),$.each(e.btn.data("reasons"),function(e,a){t.reason.append('<option value="'+a+'">'+a+"</option>")}),t.reason.append('<option value="custom">'+e.btn.data("reasons-custom")+"...</option>"),e.p.html($.sanitize(t.html())).show()})}),$(document).on("change",'[id^="confirmation"] .popover-body select#reason',function(){"custom"===$(this).val()&&$(this).replaceWith('<input type="text" id="reason" class="form-control">')}),jQuery(document).ready(function(){let e=$("#map");e.length&&(e.data=e.data(),void 0!==e.data.coordsMarker&&e.data.coordsMarker.length&&(e.html().length||e.googleMap({zoom:parseInt(e.data.zoom),scrollwheel:!0,type:"ROADMAP"}).addClass(e.data.containerClass),$.each(e.data.coordsMarker,function(t,a){e.addMarker({coords:a})})))}),jQuery(document).on("readyAndAjax",function(){let e=$("#map-select");e.length&&(e.data=e.data(),e.html().length||(e.googleMap({zoom:e.data.zoom,coords:e.data.coords,scrollwheel:!0,type:"ROADMAP"}).addClass(e.attr("data-container-class")),e.siblings('[id^="marker"]').each(function(t,a){let n=$(a);(n={lat:n.find('input[id$="lat"]'),long:n.find('input[id$="long"]')}).lat.val().length&&n.long.val().length&&e.addMarker({coords:[n.lat.val(),n.long.val()],id:"marker"+t,draggable:!0,success:function(e){n.lat.val(e.lat),n.long.val(e.lon)}})})))}),jQuery(document).on("click","#remove-marker",function(e){e.preventDefault();let t=$("#map-select");t.removeMarker("marker0"),t.siblings("#marker0").find('input[id$="lat"]').val(null),t.siblings("#marker0").find('input[id$="long"]').val(null),$("#add-marker").show(),$(this).hide()}),jQuery(document).on("click","#add-marker",function(e,t,a){e.preventDefault();let n=$("#map-select");a||t||(t=n.data("coords")),n.addMarker({coords:t||null,address:a||null,draggable:!0,id:"marker0",success:function(e){n.siblings("#marker0").find('input[id$="lat"]').val(e.lat),n.siblings("#marker0").find('input[id$="long"]').val(e.lon)}}),$("#remove-marker").show(),$(this).hide()}),jQuery(document).on("readyAndAjax",function(){if(!$(".trumbowyg-box").length){let e=$("#content_html_dir_trumbowyg");e.trumbowyg({lang:e.data("lang"),svgPath:!1,hideButtonTexts:!0,tagsToRemove:["script"],autogrow:!0,btnsDef:{},btns:[["viewHTML"],["historyUndo","historyRedo"],["formatting"],["foreColor","backColor"],["strong","em","del"],["unorderedList","orderedList"],["removeformat"],["fullscreen"]]}),e.on("tbwopenfullscreen",function(){$(".trumbowyg-fullscreen .trumbowyg-editor").css({cssText:`height: calc(100% - ${$(".trumbowyg-button-pane").height()}px) !important`})})}}),jQuery(document).on("change","select#payment_code_sms",function(){let e=$.parseJSON($(this).find("option:selected").attr("data"));$("div#nav-code_sms p span#number").text(e.number),$("div#nav-code_sms p span#code_sms").text(e.code),$("div#nav-code_sms p span#price").text(e.price)}),jQuery(document).on("change","select#payment_code_transfer",function(){let e=$.parseJSON($(this).find("option:selected").attr("data"));$("div#nav-code_transfer p a#code_transfer").attr("href",function(){return $(this).attr("href").replace(/=(.*)/,"="+e.code).trim()}),$("div#nav-code_transfer p span#price").text(e.price)}),jQuery(document).on("change","select#backlink",function(){let e=$.parseJSON($(this).find("option:selected").attr("data")),t='<a href="'+e.url+'" title="'+e.name+'">';null!==e.img_url_from_storage?t+='<img src="'+e.img_url_from_storage+'" alt="'+e.name+'">':t+=e.name,t+="</a>",$("#backlink_code").val($.sanitize(t)),$("#backlink_preview").html($.sanitize(t))}),jQuery(document).on("click",".checkContent, .check-content",function(e){e.preventDefault();let t,a=$(this).parent().find('[id^="content"]').text().split(".").filter(e=>e),n=0,o="";for(t=0;t<50;t++)if(0===n&&(n=Math.floor(Math.random()*a.length)),void 0!==a[n]?(o+=a[n].trim()+". ",n++):(o="",n=0),o.length>150){window.open("http://www.google.pl/search?hl=pl&q="+encodeURI(o),"checkContent","resizable=yes,status=no,scrollbars=yes,toolbar=no,menubar=no,width=1366,height=768").focus();break}return!1}),jQuery(document).on("readyAndAjax",function(){$(".thumbnail").popover({trigger:"hover",boundary:"window",html:!0,content:function(){return $.sanitize($(this).html())},placement:"auto"}).on("inserted.bs.popover",function(){$('[id^="popover"]').addClass("thumbnail")})}),jQuery(document).on("change",'div[id^=nav-code] input[id*="sync"]',function(){let e=$(this).closest(".input-group").find('textarea[id*="codes"]');!0===$(this).prop("checked")?e.prop("readonly",!1):e.prop("readonly",!0)});
