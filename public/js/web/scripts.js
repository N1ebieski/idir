$(function(){$(document).trigger("ready"),$(document).trigger("readyAndAjax")}),$(document).ajaxComplete(function(){$(document).trigger("readyAndAjax")}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/actions@enter",function(){$("form").find("input, select").on("keypress",function(e){if(13==e.which)return e.preventDefault(),!1})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/comment@create","a.createComment, a.create-comment",function(e){e.preventDefault();let t=$(this),n=t.closest("[id^=comment]").find("form#createComment, form#create-comment");if(n.length>0)n.fadeToggle();else{let e=t.closest("[id^=comment]");$.ajax({url:t.data("route"),method:"get",beforeSend:function(){t.prop("disabled",!0),e.append($.getLoader("spinner-border","loader"))},complete:function(){t.prop("disabled",!1),e.find(".loader").remove(),e.find(".captcha").recaptcha()},success:function(t){e.children("div").append($.sanitize(t.view))},error:function(t){t.responseJSON.message&&e.children("div").prepend($.getAlert("danger",t.responseJSON.message))}})}}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/comment@edit","a.editComment, a.edit-comment",function(e){e.preventDefault();let t=$(this),n=t.closest("[id^=comment]");$.ajax({url:t.data("route"),method:"get",beforeSend:function(){n.children("div").hide(),n.append($.getLoader("spinner-border","loader"))},complete:function(){n.find(".loader").remove()},success:function(e){n.append($.sanitize(e.view))},error:function(e){n.children("div").show(),e.responseJSON.message&&n.children("div").prepend($.getAlert("danger",e.responseJSON.message))}})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/comment@cancel","button.editCommentCancel, button.edit-comment-cancel",function(e){e.preventDefault();let t=$(this).closest("[id^=comment]");t.children("div").show(),t.find("form#editComment, form#edit-comment").remove()}),$(document).on("ready.n1ebieski/icore/web/scripts/ajax/comment@filter",function(){$(document).on("change.n1ebieski/icore/web/scripts/ajax/comment@filterOrderBy","#filterCommentOrderBy, #filter-orderby-comment",function(e){e.preventDefault();let t=$("#filter");t.href=t.data("route")+"?"+t.serialize(),function(e,t){$.ajax({url:t,method:"get",dataType:"html",beforeSend:function(){$("#filterContent, #filter-content").find(".btn").prop("disabled",!0),$("#filterOrderBy, #filter-orderby").prop("disabled",!0),$("#filterPaginate, #filter-paginate").prop("disabled",!0),e.children("div").append($.getLoader("spinner-border")),$("#filterModal, #filter-modal").modal("hide")},complete:function(){e.find(".loader-absolute").remove(),$("div#comment").find(".captcha").recaptcha()},success:function(e){$("#filterContent, #filter-content").html($.sanitize($(e).find("#filterContent, #filter-content").html())),document.title=document.title.replace(/:\s(\d+)/,": 1"),history.replaceState(null,null,t)}})}(t,t.href)})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/comment@rate","a.rateComment, a.rate-comment",function(e){e.preventDefault();let t=$(this),n=t.closest("[id^=comment]").find("span.rating");$.ajax({url:t.data("route"),method:"get",complete:function(){n.addClass("font-weight-bold")},success:function(e){n.text(e.sum_rating)}})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/comment@store",".storeComment, .store-comment",function(e){e.preventDefault();let t=$(this),n=t.closest("form");n.btn=n.find(".btn"),n.input=n.find(".form-control"),$.ajax({url:n.data("route"),method:"post",data:n.serialize(),dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),n.input.removeClass("is-valid"),n.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),n.input.addClass("is-valid"),n.find(".captcha").recaptcha(),n.find(".captcha").captcha()},success:function(e){if(e.view){n.closest("[id^=comment]").after($.sanitize(e.view));let t=n.closest("[id^=comment]").next("div");t.addClass("alert-primary font-italic border-bottom"),setTimeout(function(){t.removeClassStartingWith("alert-")},5e3)}e.success&&n.before($.getAlert("success",e.success)),0!=n.find("#parent_id").val()?n.remove():n.find("#content").val("")},error:function(e){e.responseJSON.errors?$.each(e.responseJSON.errors,function(e,t){n.find("#"+$.escapeSelector(e)).addClass("is-invalid"),n.find("#"+$.escapeSelector(e)).closest(".form-group").append($.getError(e,t))}):e.responseJSON.message&&n.prepend($.getAlert("danger",e.responseJSON.message))}})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/comment@take","a.takeComment, a.take-comment",function(e){e.preventDefault();let t=$(this),n=t.closest("[id^=row]"),a=t.closest("div");$.ajax({url:t.data("route"),method:"post",data:{filter:{except:n.children("[id^=row]").map(function(){return $(this).attr("data-id")}).get(),orderby:t.closest("#filterContent, #filter-content").find("#filterCommentOrderBy, #filter-orderby-comment").val()}},beforeSend:function(){t.hide(),a.append($.getLoader("spinner-border","loader"))},complete:function(){a.find(".loader").remove()},success:function(e){n.append($.sanitize(e.view))}})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/comment@update",".updateComment, .update-comment",function(e){e.preventDefault();let t=$(this),n=t.closest("form");n.btn=n.find(".btn"),n.input=n.find(".form-control"),$.ajax({url:n.data("route"),method:"put",data:n.serialize(),dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),n.input.removeClass("is-valid"),n.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),n.input.addClass("is-valid")},success:function(e){let t=n.closest("[id^=comment]");t.html($.sanitize($(e.view).html())),t.addClass("alert-primary"),setTimeout(function(){t.removeClassStartingWith("alert-")},5e3)},error:function(e){e.responseJSON.errors?$.each(e.responseJSON.errors,function(e,t){n.find("#"+$.escapeSelector(e)).addClass("is-invalid"),n.find("#"+$.escapeSelector(e)).closest(".form-group").append($.getError(e,t))}):e.responseJSON.message&&n.prepend($.sanitize($.getAlert("danger",e.responseJSON.message)))}})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/default@destroy",".destroy",function(e){e.preventDefault();let t=$(this),n=$("#row"+t.data("id"));$.ajax({url:t.data("route"),method:"delete",beforeSend:function(){n.find(".responsive-btn-group").addClass("disabled"),n.find('[data-btn-ok-class*="destroy"]').getLoader("show")},complete:function(){n.find('[data-btn-ok-class*="destroy"]').getLoader("hide")},success:function(e){n.fadeOut("slow")}})}),$(document).on("ready.n1ebieski/icore/web/scripts/ajax/default@filter",function(){function e(e,t){$.ajax({url:t,method:"get",dataType:"html",beforeSend:function(){$("#filterContent, #filter-content").find(".btn").prop("disabled",!0),$("#filterOrderBy, #filter-orderby").prop("disabled",!0),$("#filterPaginate, #filter-paginate").prop("disabled",!0),e.children("div").append($.getLoader("spinner-border")),$("#filterModal, #filter-modal").modal("hide")},complete:function(){e.find(".loader-absolute").remove()},success:function(e){$(".modal-backdrop").remove(),$("body").removeClass("modal-open").removeAttr("style"),$("#filterContent, #filter-content").html($.sanitize($(e).find("#filterContent, #filter-content").html())),document.title=document.title.replace(/:\s(\d+)/,": 1"),history.replaceState(null,null,t)}})}$(document).on("change.n1ebieski/icore/web/scripts/ajax/default@filterOderBy","#filterOrderBy, #filter-orderby",function(t){t.preventDefault();let n=$("#filter");n.href=n.data("route")+"?"+n.serialize(),e(n,n.href)}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/default@filterFilter","#filterFilter, #filter-filter",function(t){t.preventDefault();let n=$("#filter");n.href=n.data("route")+"?"+n.serialize(),$("#filter").valid()&&e(n,n.href)}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/default@filterOption","a.filterOption, a.filter-option",function(t){t.preventDefault();let n=$("#filter");n.href=n.data("route")+"?"+n.find("[name!="+$.escapeSelector($(this).data("name"))+"]").serialize(),e(n,n.href)}),$(document).on("change.n1ebieski/icore/web/scripts/ajax/default@filterPaginate","#filterPaginate, #filter-paginate",function(t){t.preventDefault();let n=$("#filter");n.href=n.data("route")+"?"+n.serialize(),e(n,n.href)})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/newsletter@store",".storeNewsletter, .store-newsletter",function(e){e.preventDefault();let t=$(this),n=t.parents("form");n.btn=n.find(".btn"),n.group=n.find(".form-group"),n.input=n.find(".form-control, .custom-control-input"),$.ajax({url:n.data("route"),method:"post",data:n.serialize(),dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),$(".valid-feedback").remove(),n.input.removeClass("is-valid"),n.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),n.input.addClass("is-valid")},success:function(e){e.success&&(n.find('[name="email"]').val(""),n.find('[name="email"]').closest(".form-group").append($.getMessage(e.success)))},error:function(e){e.responseJSON.errors&&$.each(e.responseJSON.errors,function(e,t){n.find('[name="'+e+'"]').addClass("is-invalid"),n.find('[name="'+e+'"]').closest(".form-group").append($.getError(e,t))})}})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/report@create","a.createReport, a.create-report",function(e){e.preventDefault();let t=$(this),n={body:$(t.attr("data-target")).find(".modal-body"),footer:$(t.data("target")).find(".modal-footer"),content:$(t.attr("data-target")).find(".modal-content")};n.body.empty(),n.footer.empty(),$.ajax({url:t.data("route"),method:"get",beforeSend:function(){n.body.html($.getLoader("spinner-grow"))},complete:function(){n.content.find(".loader-absolute").remove()},success:function(e){n.content.html($.sanitize($(e.view).find(".modal-content").html()))}})}),$(document).on("click.n1ebieski/icore/web/scripts/ajax/report@store",".storeReport, .store-report",function(e){e.preventDefault();let t=$(this),n=t.closest(".modal-content").find("form");n.btn=n.find(".btn"),n.input=n.find(".form-control");let a={body:t.closest(".modal-content").find(".modal-body"),footer:t.closest(".modal-content").find(".modal-footer")};$.ajax({url:n.data("route"),method:"post",data:n.serialize(),dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),n.input.removeClass("is-valid"),n.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),n.input.addClass("is-valid")},success:function(e){a.footer.empty(),a.body.html($.getAlert("success",e.success))},error:function(e){let t=e.responseJSON;$.each(t.errors,function(e,t){n.find("#"+$.escapeSelector(e)).addClass("is-invalid"),n.find("#"+$.escapeSelector(e)).after($.getError(e,t))})}})}),function(e){e.fn.serializeObject=function(){var t=this,n={},a={},i={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,n){return e[t]=n,e},this.push_counter=function(e){return void 0===a[e]&&(a[e]=0),a[e]++},e.each(e(this).serializeArray(),function(){if(i.validate.test(this.name)){for(var a,o=this.name.match(i.key),r=this.value,s=this.name;void 0!==(a=o.pop());)s=s.replace(new RegExp("\\["+a+"\\]$"),""),a.match(i.push)?r=t.build([],t.push_counter(s),r):a.match(i.fixed)?r=t.build([],a,r):a.match(i.named)&&(r=t.build({},a,r));n=e.extend(!0,n,r)}}),n},e.fn.autoHeight=function(t){function n(t){return t.offsetHeight<t.scrollHeight?e(t).css({height:"auto"}).height(t.scrollHeight):e(t)}if(!1!==("boolean"!=typeof t.autogrow||t.autogrow))return this.each(function(){n(this).on("input",function(){n(this)})})},e.fn.removeClassStartingWith=function(e){this.removeClass(function(t,n){return(n.match(new RegExp("\\b"+e+"\\S+","g"))||[]).join(" ")})},e.sanitize=function(t){let n=e(e.parseHTML("<div>"+t+"</div>",null,!1));return n.find("*").each(function(t,n){e.each(n.attributes,function(){let t=this.name,a=this.value;0!=t.indexOf("on")&&0!=a.indexOf("javascript:")||e(n).removeAttr(t)})}),n.html()},e.getUrlParameter=function(e,t){return(RegExp(t+"=(.+?)(&|$)").exec(e)||[,null])[1]},e.fn.recaptcha=function(){var e;this.hasClass("g-recaptcha")&&(e=this.html().length?parseInt(this.find('textarea[name="g-recaptcha-response"]').attr("id").match(/\d+$/),10):grecaptcha.render(this[0],{sitekey:this.attr("data-sitekey")}),Number.isInteger(e)?grecaptcha.reset(e):grecaptcha.reset())},e.fn.captcha=function(){this.hasClass("logic_captcha")&&(this.find('input[name="captcha"]').val(""),this.find(".reload_captcha_base64").trigger("click"))},e.fn.getLoader=function(t,n="spinner-border"){if("show"==t){e(this).parent().find("button").prop("disabled",!0),e(this).find("i").hide();let t=!e(this).is('[class*="btn-outline-"]')||void 0!==e.cookie("theme_toggle")&&"light"!==e.cookie("theme_toggle")?"text-light":"text-dark";e(this).prepend(e.sanitize('<span class="'+n+" "+n+"-sm "+t+'" role="status" aria-hidden="true"></span>'))}"hide"==t&&(e(this).parent().find("button").prop("disabled",!1),e(this).find("i").show(),e(this).find('[role="status"]').remove())},e.getLoader=function(t="spinner-border",n="loader-absolute"){return e.sanitize('<div class="'+n+'"><div class="'+t+'"><span class="sr-only">Loading...</span></div></div>')},e.getAlert=function(t,n){return e.sanitize('<div class="alert alert-'+t+' alert-time" role="alert">'+n+"</div>")},e.getError=function(t,n){return e.sanitize('<span class="invalid-feedback d-block font-weight-bold" id="error-'+t+'">'+n+"</span>")},e.getMessage=function(t){return e.sanitize('<span class="valid-feedback d-block font-weight-bold">'+t+"</span>")}}(jQuery),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/plugins/bootstrap-confirmation@init",function(){$("[data-toggle=confirmation]").each(function(){let e=$(this);e.confirmation({rootSelector:"[data-toggle=confirmation]",copyAttributes:"href data-route data-id",singleton:!0,popout:!0,onConfirm:function(){e.hasClass("submit")&&e.parents("form:first").submit()}})})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/plugins/bootstrap-select/category@init",function(){$("select.select-picker-category").each(function(){let e=$(this);!0!==e.data("loaded")&&(e.selectpicker().on("changed.bs.select",function(){e.next("button").find(".filter-option-inner-inner > small").remove()}).on("shown.bs.select",function(){e.parent().find(".dropdown-menu").find('input[type="search"]').attr("name","search")}).trigger("change"),!0===e.data("abs")&&(e.ajaxSelectPicker({ajax:{data:function(){return{filter:{search:"{{{q}}}",orderby:"real_depth|desc",except:e.data("abs-filter-except")||null,status:1}}}},preprocessData:function(t){let n=[],a=e.data("abs-max-options-length")||t.data.length,i=e.data("abs-default-options")||[];return $.each(i,function(e,t){n.push({value:t.value,text:t.text})}),$.each(t.data,function(t,i){if(t>=a)return!1;n.push({value:e.data("abs-value-attr")?i[e.data("abs-value-attr")]:i.id,text:e.data("abs-text-attr")?i[e.data("abs-text-attr")]:i.name,data:{content:i.ancestors.length?'<small class="p-0 m-0">'+i.ancestors.map(e=>e.name).join(" &raquo; ")+" &raquo; </small>"+i.name:null}})}),n},minLength:3,preserveSelected:"boolean"!=typeof e.data("abs-preserve-selected")||e.data("abs-preserve-selected"),preserveSelectedPosition:e.data("abs-preserve-selected-position")||"before",langCode:e.data("abs-lang-code")||null}),e.trigger("change").data("AjaxBootstrapSelect").list.cache={}),e.parent().addClass("input-group"),e.attr("data-loaded",!0))})}),jQuery(document).on("readyAndAjax.n1ebieski/icore/web/scripts/plugins/bootstrap-select/default@init",function(){$("select.select-picker").each(function(){let e=$(this);!0!==e.data("loaded")&&(e.selectpicker().on("changed.bs.select",function(){e.next("button").find(".filter-option-inner-inner > small").remove()}).on("shown.bs.select",function(){e.parent().find(".dropdown-menu").find('input[type="search"]').attr("name","search")}).trigger("change"),!0===e.data("abs")&&(e.ajaxSelectPicker({ajax:{data:function(){return{filter:{search:"{{{q}}}",except:e.data("abs-filter-except")||null,status:1}}}},preprocessData:function(t){let n=[],a=e.data("abs-max-options-length")||t.data.length,i=e.data("abs-default-options")||[];return $.each(i,function(e,t){n.push({value:t.value,text:t.text})}),$.each(t.data,function(t,i){if(t>=a)return!1;n.push({value:e.data("abs-value-attr")?i[e.data("abs-value-attr")]:i.id,text:e.data("abs-text-attr")?i[e.data("abs-text-attr")]:i.name})}),n},minLength:3,preserveSelected:"boolean"!=typeof e.data("abs-preserve-selected")||e.data("abs-preserve-selected"),preserveSelectedPosition:e.data("abs-preserve-selected-position")||"before",langCode:e.data("abs-lang-code")||null}),e.trigger("change").data("AjaxBootstrapSelect").list.cache={}),e.parent().addClass("input-group"),e.attr("data-loaded",!0))})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/plugins/infinite-scroll@init",function(){let e=$("#infinite-scroll");e.jscroll({debug:!1,autoTrigger:1==e.data("autotrigger"),data:function(){let e=$("#filter").serializeObject().filter||{};if(e.except=$(this).find("[id^=row]").map(function(){return $(this).attr("data-id")}).get(),e.except.length)return{filter:e}},loadingHtml:$.getLoader("spinner-border","loader"),loadingFunction:function(){$("#is-pagination").first().remove()},padding:0,nextSelector:"a#is-next:last",contentSelector:"#infinite-scroll",pagingSelector:".pagination",callback:function(e){let t=e.split(" ")[0];history.replaceState(null,null,t)}})}),$(document).on("ready.n1ebieski/icore/web/scripts/plugins/jquery-googlemap@init",function(){$("#map, .map").each(function(){let e=$(this);e.length&&(e.data=e.data(),void 0!==e.data.addressMarker&&e.data.addressMarker.length&&(e.googleMap({zoom:parseInt(e.data.zoom),coords:e.data.coords,scrollwheel:!0,type:"ROADMAP"}).addClass(e.data.containerClass),$.each(e.data.addressMarker,function(t,n){e.addMarker({address:n})})))})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/plugins/jquery-lazy@init",function(){$(".lazy").lazy({effect:"fadeIn",effectTime:"fast",threshold:0})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/plugins/magnific-popup@init",function(){let e=$(".lightbox");if(e.length){let t=e.map(function(){return $(this).data("gallery")}).get().filter(function(e,t,n){return t==n.indexOf(e)});$.each(t,function(e,t){$("[data-gallery="+$.escapeSelector(t)+"]").magnificPopup({type:"image",gallery:{enabled:!0}})})}}),$(document).on("ready.n1ebieski/icore/web/scripts/plugins/tagsinput@init",function(){$(".tagsinput").each(function(){let e=$(this);e.tagsInput({placeholder:e.attr("placeholder"),minChars:3,maxChars:e.data("max-chars")||30,limit:e.data("max"),validationPattern:new RegExp("^(?:^[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ0-9à-ü ]+$)$"),unique:!0})})}),$(document).on("ready.n1ebieski/icore/web/scripts/plugins/typeahead@init",function(){$.when(function(){let e=$("#typeahead"),t=e.closest("form"),n=new Bloodhound({remote:{url:e.data("route")+"?filter[search]=%QUERY%",filter:function(e){return $.map(e.data,function(e){return{name:e.name}})},wildcard:"%QUERY%"},datumTokenizer:Bloodhound.tokenizers.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace});e.typeahead({hint:!0,highlight:!0,minLength:3},{limit:5,source:n.ttAdapter(),display:function(e){return $($.parseHTML(e.name)).text()},templates:{suggestion:function(e){let n=$($.parseHTML(e.name)).text(),a=t.attr("action")+"?source="+t.find('[name="source"]').val()+"&search="+n;return $.sanitize('<a href="'+a+'" class="list-group-item py-2 text-truncate">'+n+"</a>")}}})}()).then(function(){$("input.tt-input").css("background-color","")})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/view/alerts@init",function(){$(".alert-time").delay(2e4).fadeOut()}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/view/bootstrap_tooltips@init",function(){$('[data-toggle="tooltip"]').tooltip()}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/view/counter@init",function(){$(".counter").each(function(){let e=$(this);e.name=$.escapeSelector(e.data("name")),e.min=void 0!==e.data("min")&&Number.isInteger(e.data("min"))?e.data("min"):null,e.max=void 0!==e.data("max")&&Number.isInteger(e.data("max"))?e.data("max"):null;let t=function(){let t=[$('[name="'+e.name+'"]'),$('[name="'+e.name+'"]').hasClass("trumbowyg-textarea")?$('[name="'+e.name+'"]').parent().find(".trumbowyg-editor"):null];$.each(t.filter(e=>null!=e),function(){$(this).on("keyup",function(){let t=$(this).attr("contenteditable")?parseFloat($(this).text().length):parseFloat($($.parseHTML($(this).val())).text().length);e.firstchild=e.children(":first"),e.firstchild.text(t),0===t?e.firstchild.removeClass():(e.firstchild.addClass("text-success"),e.firstchild.removeClass("text-danger"),(null!==e.min&&t<e.min||null!==e.max&&t>e.max)&&(e.firstchild.addClass("text-danger"),e.firstchild.removeClass("text-success")))})})};-1!==$('[name="'+e.name+'"]').attr("id").indexOf("trumbowyg")?$("#"+$('[name="'+e.name+'"]').attr("id")).on("tbwinit",()=>t()):t()})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/view/custom-file-input@init",function(){$(".custom-file-input").each(function(){$(this).on("change",function(){for(var e=[],t=0;t<$(this)[0].files.length;t++)e.push($(this)[0].files[t].name);$(this).siblings(".custom-file-label").addClass("selected").html(e.join(", "))})})}),$(document).on("ready.n1ebieski/icore/web/scripts/view/navbar@init",function(){let e=$(window).scrollTop(),t=0,n=$(".menu.navbar");!1!==n.data("autohide")&&$(window).on("scroll",function(){if(!$("body").hasClass("modal-open")){if("fixed"===$(".trumbowyg-button-pane").css("position"))return void n.fadeOut();let a=$(window).scrollTop(),i=n.height()+10;e<(t=a)&&e>i?n.fadeOut():n.fadeIn(),e=t}})}),$(document).on("ready.n1ebieski/icore/web/scripts/view/navbar@hashtag",function(){let e=window.location.hash,t=$(".menu.navbar");if(!1!==t.data("autohide")&&e.length){$(window).scrollTop()>t.height()+10&&t.fadeOut()}}),$(document).on("click.n1ebieski/icore/web/scripts/view/navbar@toggle",".modal-backdrop, #navbarToggle, #navbar-toggle",function(e){e.preventDefault(),$(".modal-backdrop").length?($(".navbar-collapse").collapse("hide"),$(".modal-backdrop").fadeOut("slow",function(){$(this).remove()}),$("body").removeClass("modal-open")):($(".navbar-collapse").collapse("show"),$('<div class="modal-backdrop show z-900"></div>').appendTo("body").hide().fadeIn(),$("body").addClass("modal-open"))}),$(document).on("click.n1ebieski/icore/web/scripts/view/policy@agree","#policy #agree",function(e){e.preventDefault(),$("#policy").remove(),$.cookie("policy_agree",1,{path:"/",expires:365})}),$(document).on("scroll.n1ebieski/icore/web/scripts/view/scroll_to_top@init",function(){$(this).scrollTop()>100?$(".scroll-to-top").fadeIn():$(".scroll-to-top").fadeOut()}),$(document).on("click.n1ebieski/icore/web/scripts/view/scroll_to_top@scroll","a.scroll-to-top",function(e){$("html, body").stop().animate({scrollTop:0},1e3,"easeInOutExpo"),e.preventDefault()}),$(document).on("click.n1ebieski/icore/web/scripts/view/search@toggle",".search-toggler",function(e){e.preventDefault(),window.innerWidth>=768?$("#pagesToggle, #pages-toggle").fadeToggle(0):($("#navbarLogo, #navbar-logo").fadeToggle(0),$("#navbarToggle, #navbar-toggle").fadeToggle(0)),$("#searchForm, #search-form").fadeToggle(0),$(".search-toggler").find("i").toggleClass("fa-search fa-times")}),$(document).on("ready.n1ebieski/icore/web/scripts/view/search@disable",function(){let e=$("form#searchForm, form#search-form");e.btn=e.find("button"),e.find('input[name="search"]').keyup(function(t){$(this).val().trim().length>=3?e.btn.prop("disabled",!1):e.btn.prop("disabled",!0)})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/view/search@enter",function(){let e=$("form#searchForm, form#search-form");e.btn=e.find("button"),e.find('input[name="search"]').on("keypress",function(t){if(13==t.which&&!1===e.btn.prop("disabled"))return $("form#searchForm, form#search-form").trigger("submit"),!1})}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/view/textarea@init",function(){$("textarea").each(function(){$(this).autoHeight({autogrow:$(this).data("autogrow")})})}),$(document).on("click.n1ebieski/icore/web/scripts/view/theme@toggle","div#themeToggle button, div#theme-toggle button",function(e){e.preventDefault();let t=$(this);t.hasClass("btn-light")&&$.cookie("theme_toggle","light",{path:"/",expires:365}),t.hasClass("btn-dark")&&$.cookie("theme_toggle","dark",{path:"/",expires:365}),window.location.reload()}),$(document).on("readyAndAjax.n1ebieski/icore/web/scripts/view/toasts@init",function(){$(".toast").toast("show"),$(".toast").on("hidden.bs.toast",function(){$(this).remove()})}),$(document).on("click.n1ebieski/idir/web/scripts/ajax/contact@send",".sendContact, .send-contact",function(e){e.preventDefault();let t=$(this),n=t.closest(".modal-content").find("form");n.btn=n.find(".btn"),n.input=n.find(".form-control, .custom-control-input");let a={body:n.closest(".modal-body")};$.ajax({url:n.data("route"),method:"post",data:n.serialize(),dataType:"json",beforeSend:function(){t.getLoader("show"),$(".invalid-feedback").remove(),n.input.removeClass("is-valid"),n.input.removeClass("is-invalid")},complete:function(){t.getLoader("hide"),n.find(".captcha").recaptcha(),n.find(".captcha").captcha(),n.input.addClass("is-valid")},success:function(e){a.body.html($.getAlert("success",e.success))},error:function(e){e.responseJSON.errors?$.each(e.responseJSON.errors,function(e,t){n.find('[name="'+$.escapeSelector(e)+'"]').addClass("is-invalid"),n.find('[name="'+$.escapeSelector(e)+'"]').closest(".form-group").append($.getError(e,t))}):e.responseJSON.message&&n.prepend($.getAlert("danger",e.responseJSON.message))}})}),$(document).on("click.n1ebieski/idir/web/scripts/ajax/contact@show",".showContact, .show-contact",function(e){e.preventDefault();let t=$(this),n={body:$(t.data("target")).find(".modal-body"),footer:$(t.data("target")).find(".modal-footer"),content:$(t.data("target")).find(".modal-content")};n.body.empty(),n.footer.empty(),$.ajax({url:t.data("route"),method:"get",beforeSend:function(){n.body.append($.getLoader("spinner-grow"))},complete:function(){n.content.find(".loader-absolute").remove(),n.content.find(".captcha").recaptcha()},success:function(e){n.content.html($.sanitize($(e.view).find(".modal-content").html()))}})}),$(document).on("ready.n1ebieski/idir/web/scripts/ajax/dir@rate",function(){$('[id^="star-rating"]').on("rating:change",function(e,t){e.preventDefault();let n=$(this);t!==n.data("user-value")?$.ajax({url:n.data("route")+"?rating="+t,method:"get",success:function(e){n.rating("update",e.sum_rating).rating("refresh",{showClear:!0}).attr("value",e.sum_rating).data("user-value",t)}}):n.rating("update",n.attr("value"))}),$('[id^="star-rating"]').on("rating:clear",function(e){e.preventDefault();let t=$(this);$.ajax({url:t.data("route")+"?rating="+t.data("user-value"),method:"get",success:function(e){t.rating("update",e.sum_rating).rating("refresh",{showClear:!1}).data("user-value","")}})})}),$(document).on("click.n1ebieski/idir/web/scripts/ajax/field@gus","#searchGus .btn, #search-gus .btn",function(e){e.preventDefault();let t=$("#searchGus, #search-gus");t.form=t.closest("form"),t.url=t.data("route"),t.btn=t.find(".btn"),t.input=t.find("input"),$.ajax({url:t.url,data:{type:t.find("select#type").val(),number:t.find("input#number").val()},method:"post",dataType:"json",beforeSend:function(){t.btn.getLoader("show"),t.find(".invalid-feedback").remove(),t.input.removeClass("is-valid"),t.input.removeClass("is-invalid")},complete:function(){t.btn.getLoader("hide")},success:function(e){$.each(e.data,function(e,n){let a=t.form.find("#"+$.escapeSelector(e));void 0!==a&&(a.val($.sanitize(n)),a.children("#map-select").length&&($("#remove-marker").trigger("click"),$("#add-marker").trigger("click",[null,$.sanitize(n)])))})},error:function(e){$.each(e.responseJSON.errors,function(e,n){t.input.addClass("is-invalid"),t.input.parent().after($.getError(e,n))})}})}),$(document).on("readyAndAjax.n1ebieski/idir/web/scripts/ajax/field@enter",function(){$("#searchGus input, #search-gus input").on("keypress",function(e){if(13==e.which)return $("#searchGus .btn, #search-gus .btn").trigger("click"),!1})}),$(document).on("click.n1ebieski/idir/web/scripts/ajax/stat@click","a.clickStat, a.click-stat",function(e){e.preventDefault();let t=$(this);$.ajax({url:t.data("route"),method:"get"}),window.open(t.attr("href"),"_blank")}),$(document).on("readyAndAjax.n1ebieski/idir/web/scripts/plugins/bootstrap-star-rating@init",function(){$('[id^="star-rating"]').rating({theme:"krajee-svg",showCaption:!1})}),$(document).on("ready.n1ebieski/idir/web/scripts/plugins/cssmap-poland@init",function(){$("#map-poland").CSSMap({size:430,tooltips:"floating-top-center",responsive:"auto",tapOnce:!0,onLoad:function(){$("#map-poland").find("a.active-region").parent().addClass("active-region")}}).children().show()}),$(document).on("ready.n1ebieski/idir/web/scripts/plugins/jquery-googlemap@init",function(){$("#map, .map").each(function(){let e=$(this);e.length&&(e.data=e.data(),void 0!==e.data.coordsMarker&&e.data.coordsMarker.length&&(e.html().length||e.googleMap({zoom:parseInt(e.data.zoom),coords:e.data.coords,scrollwheel:!0,type:"ROADMAP"}).addClass(e.data.containerClass),$.each(e.data.coordsMarker,function(t,n){e.addMarker({coords:n})})))})}),$(document).on("readyAndAjax.n1ebieski/idir/web/scripts/plugins/jquery-googlemap@initSelect",function(){let e=$("#map-select");e.length&&(e.data=e.data(),e.html().length||(e.googleMap({zoom:e.data.zoom,coords:e.data.coords,scrollwheel:!0,type:"ROADMAP"}).addClass(e.attr("data-container-class")),e.siblings('[id^="marker"]').each(function(t,n){let a=$(n);(a={lat:a.find('input[id$="lat"]'),long:a.find('input[id$="long"]')}).lat.val().length&&a.long.val().length&&e.addMarker({coords:[a.lat.val(),a.long.val()],id:"marker"+t,draggable:!0,success:function(e){a.lat.val(e.lat),a.long.val(e.lon)}})})))}),$(document).on("click.n1ebieski/idir/web/scripts/plugins/jquery-googlemap@remove","#remove-marker",function(e){e.preventDefault();let t=$("#map-select");t.removeMarker("marker0"),t.siblings("#marker0").find('input[id$="lat"]').val(null),t.siblings("#marker0").find('input[id$="long"]').val(null),$("#add-marker").show(),$(this).hide()}),$(document).on("click.n1ebieski/idir/web/scripts/plugins/jquery-googlemap@add","#add-marker",function(e,t,n){e.preventDefault();let a=$("#map-select");n||t||(t=a.data("coords")),a.addMarker({coords:t||null,address:n||null,draggable:!0,id:"marker0",success:function(e){a.siblings("#marker0").find('input[id$="lat"]').val(e.lat),a.siblings("#marker0").find('input[id$="long"]').val(e.lon)}}),$("#remove-marker").show(),$(this).hide()}),$(document).on("readyAndAjax.n1ebieski/idir/web/scripts/plugins/trumbowyg@init",function(){if(!$(".trumbowyg-box").length){let e=$("#content_html_dir_trumbowyg");e.trumbowyg({lang:e.data("lang"),fixedBtnPane:e.data("fixed-btn-pane")||!0,fixedFullWidth:e.data("fixed-full-width")||!1,svgPath:!1,hideButtonTexts:!0,tagsToRemove:["script"],autogrow:!0,btnsDef:{},btns:[["viewHTML"],["historyUndo","historyRedo"],["formatting"],["foreColor","backColor"],["strong","em","del"],["unorderedList","orderedList"],["removeformat"],["fullscreen"]]}),e.on("tbwopenfullscreen",function(){$(".trumbowyg-fullscreen .trumbowyg-editor").css({cssText:`height: calc(100% - ${$(".trumbowyg-button-pane").height()}px) !important`})})}}),$(document).on("change.n1ebieski/idir/web/scripts/view/delete_img@disable","form input[id^=delete_img]",function(){let e=$(this).closest(".form-group").find('[type="file"]'),t=$(this).closest(".form-group").find('[type="hidden"]');!0===$(this).prop("checked")?(e.prop("disabled",!1),t.prop("disabled",!0)):(e.prop("disabled",!0),t.prop("disabled",!1))}),$(document).on("change.n1ebieski/idir/web/scripts/view/dir@toggleCodeSms","select#payment_code_sms",function(){let e=JSON.parse($(this).find("option:selected").attr("data"));$("div#nav-code_sms p span#number").text(e.number),$("div#nav-code_sms p span#code_sms").text(e.code),$("div#nav-code_sms p span#price").text(e.price),$("div#nav-code_sms div#qr_image").html($.sanitize(e.qr_as_image))}),$(document).on("change.n1ebieski/idir/web/scripts/view/dir@toggleCodeTransfer","select#payment_code_transfer",function(){let e=JSON.parse($(this).find("option:selected").attr("data"));$("div#nav-code_transfer p a#code_transfer").attr("href",function(){return $(this).attr("href").replace(/=(.*)/,"="+e.code).trim()}),$("div#nav-code_transfer p span#price").text(e.price)}),$(document).on("change.n1ebieski/idir/web/scripts/view/dir@toggleBacklink","select#backlink",function(){let e=JSON.parse($(this).find("option:selected").attr("data")),t='<a href="'+e.url+'" title="'+e.name+'">';null!==e.img_url_from_storage?t+='<img src="'+e.img_url_from_storage+'" alt="'+e.name+'">':t+=e.name,t+="</a>",$("#backlink_code").val($.sanitize(t)),$("#backlink_preview").html($.sanitize(t))});
